function f(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function p(s){document.documentElement.setAttribute("data-bs-theme",s)}function g(s){let e=()=>{s(f())},t=()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",e)};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e),t}function T(s,e){s.setAttribute("data-bs-theme",e)}var i=class{events={};on(e,t){typeof this.events[e]!="object"&&(this.events[e]=[]),this.events[e].push(t);let r=this,n=function(){r.removeListener(e,t)};return!/^(#has-listeners|#no-listeners)$/.test(e)&&this.events[e].length==1&&this.emit("#has-listeners",e),n}removeListener(e,t){var r;typeof this.events[e]=="object"&&(r=this.events[e].indexOf(t),r>-1&&(this.events[e].splice(r,1),!/^(#has-listeners|#no-listeners)$/.test(e)&&this.events[e].length==0&&this.emit("#no-listeners",e)))}emit(e){if(typeof this.events[e]=="object"){var t,r,n,o=[].slice.call(arguments,1);for(r=this.events[e].slice(),n=r.length,t=0;t<n;t++)try{r[t].apply(this,o)}catch(m){console.error(e,o),console.error(m)}}}once(e,t){return this.on(e,function r(){this.removeListener(e,r),t.apply(this,arguments)})}waitForEvent(e,t=0){return new Promise(r=>{let n,o=this.on(e,()=>{t>0&&clearTimeout(n),o(),r(!0)});t>0&&(n=setTimeout(()=>{o(),r(!1)},t))})}waitForAnyEvent(e,t=0){return new Promise(r=>{let n,o=[],m=()=>{t>0&&clearTimeout(n),o.forEach(d=>{d()}),r(!0)};e.forEach(d=>{o.push(this.on(d,m))}),t>0&&(n=setTimeout(()=>{m(),r(!1)},t))})}clear(){this.events={}}destroy(){this.clear()}clearEventListeners(e){(this.events[e]||[]).length>0&&(this.events[e]=[],this.emit("#no-listeners",e))}onHasEventListeners(e){return this.on("#has-listeners",e)}onNoEventListeners(e){return this.on("#no-listeners",e)}};var a=class{#t=new i;#e="auto";constructor(){let e=localStorage.getItem("preferredColorScheme");e==="dark"||e==="light"||e==="auto"?(this.#e=e,localStorage.setItem("preferredColorScheme",e)):(this.#e="auto",localStorage.setItem("preferredColorScheme","auto"))}get scheme(){return this.#e}set scheme(e){e!==this.#e&&(this.#e=e,localStorage.setItem("preferredColorScheme",this.#e),this.#t.emit("preferred-scheme-change",e))}onSchemeChange(e){return this.#t.on("preferred-scheme-change",e)}};var l=class{onSchemeChange(e){return g(e)}get scheme(){return f()}};var c=class{#t=new i;#e="light";#r;#o;darkThemeName="dark";lightThemeName="light";constructor(e,t){this.#r=t,this.#o=e;let r=t.scheme,n=e.scheme,o=sessionStorage.getItem("currentColorScheme")||"unknown";o=="dark"||o=="light"||(o="unknown"),o==="unknown"?this.#e=r==="auto"?n:r:this.#e=o}onSchemeChange(e){return this.#t.on("current-scheme-change",e)}get scheme(){return this.#e}set scheme(e){if(e!=="dark"&&e!=="light"&&e!=="auto")throw new Error("Color scheme must be either 'dark', 'light' or 'auto'.");e==="auto"&&(e=this.#r.scheme,e==="auto"&&(e=this.#o.scheme)),e!==this.#e&&(sessionStorage.setItem("currentColorScheme",e),this.#e=e,this.#t.emit("current-scheme-change",this.#e))}getDefaultTheme(){return this.#e==="dark"?this.darkThemeName:this.lightThemeName}};var u=document.createElement("meta");u.name="theme-color";document.head.appendChild(u);var S=new CSSStyleSheet;S.replaceSync(`
    :root {
        color-scheme: light dark;
    }`);document.adoptedStyleSheets.push(S);var C=new l,y=new a,h=new c(C,y),E="#FFFFFF",k="#212529";u.content=h.scheme==="dark"?k:E;C.onSchemeChange(s=>{y.scheme==="auto"&&(h.scheme=s)});h.onSchemeChange(s=>{u.content=s==="dark"?k:E,p(h.getDefaultTheme())});p(h.getDefaultTheme());export{p as applyColorTheme,T as applyColorThemeToElement,h as currentColorSchemeStorage,y as preferredSchemeStorage,C as systemSchemeStorage};
