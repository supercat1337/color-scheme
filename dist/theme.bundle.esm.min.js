var c=class{events={};on(e,r){typeof this.events[e]!="object"&&(this.events[e]=[]),this.events[e].push(r);let n=this,s=function(){n.removeListener(e,r)};return!/^(#has-listeners|#no-listeners)$/.test(e)&&this.events[e].length==1&&this.emit("#has-listeners",e),s}removeListener(e,r){var n;typeof this.events[e]=="object"&&(n=this.events[e].indexOf(r),n>-1&&(this.events[e].splice(n,1),!/^(#has-listeners|#no-listeners)$/.test(e)&&this.events[e].length==0&&this.emit("#no-listeners",e)))}emit(e){if(typeof this.events[e]=="object"){var r,n,s,i=[].slice.call(arguments,1);for(n=this.events[e].slice(),s=n.length,r=0;r<s;r++)try{n[r].apply(this,i)}catch(h){console.error(e,i),console.error(h)}}}once(e,r){return this.on(e,function n(){this.removeListener(e,n),r.apply(this,arguments)})}waitForEvent(e,r=0){return new Promise(n=>{let s,i=this.on(e,()=>{r>0&&clearTimeout(s),i(),n(!0)});r>0&&(s=setTimeout(()=>{i(),n(!1)},r))})}waitForAnyEvent(e,r=0){return new Promise(n=>{let s,i=[],h=()=>{r>0&&clearTimeout(s),i.forEach(u=>{u()}),n(!0)};e.forEach(u=>{i.push(this.on(u,h))}),r>0&&(s=setTimeout(()=>{h(),n(!1)},r))})}clear(){this.events={}}destroy(){this.clear()}clearEventListeners(e){(this.events[e]||[]).length>0&&(this.events[e]=[],this.emit("#no-listeners",e))}onHasEventListeners(e){return this.on("#has-listeners",e)}onNoEventListeners(e){return this.on("#no-listeners",e)}};var f=new c,o={colorScheme:"auto"},l="light";function a(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function g(t){let e=()=>{t(a())},r=()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",e)};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e),r}function k(t){return f.on("color-theme-change",t)}function d(t){t==="auto"&&(t=o.colorScheme),document.documentElement.setAttribute("data-bs-theme",t)}function F(t,e){t==="auto"&&(t=a()),e.setAttribute("data-bs-theme",t)}function p(t="#FFFFFF",e="#212529"){let r=document.createElement("meta");r.name="theme-color",r.media="(prefers-color-scheme: light)",r.content=t,document.head.appendChild(r);let n=document.createElement("meta");n.name="theme-color",n.media="(prefers-color-scheme: dark)",n.content=e,document.head.appendChild(n)}var m=!1;function S(){if(m)return;let t=new CSSStyleSheet;t.replaceSync(`
    :root {
        color-scheme: light dark;
    }
    `),document.adoptedStyleSheets.push(t),m=!0}function C(){try{let t=localStorage.getItem("theme-settings");typeof t=="string"&&(o=JSON.parse(t))}catch{localStorage.setItem("theme-settings",JSON.stringify({colorScheme:"auto"}))}return o}function b(){localStorage.setItem("theme-settings",JSON.stringify(o))}function L(){return o}function M(t){o=t,b()}function A(t,e){p(t,e),S(),C();let r=a();document.documentElement.setAttribute("data-bs-theme",o.colorScheme==="auto"?r:o.colorScheme),l=o.colorScheme==="auto"?r:o.colorScheme,d(o.colorScheme),g(n=>{o.colorScheme==="auto"&&y(n)})}function I(){return l}function y(t){if(t!=="dark"&&t!=="light"&&t!=="auto")throw new Error("Color scheme must be either 'dark', 'light', or 'auto'.");let e=t==="auto"?a():t;e!==l&&(d(e),l=e,f.emit("color-theme-change",l))}export{S as adaptInputsToUserPreferredColorScheme,p as addMetaThemeColor,F as applyColorThemeToElement,I as getCurrentColorScheme,a as getPreferredColorScheme,L as getSettings,A as initThemeModule,k as onCurrentColorSchemeChange,g as onSystemColorSchemeChange,y as setCurrentColorScheme,M as setSettings};
