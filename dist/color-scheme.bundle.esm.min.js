function f(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function p(o){document.documentElement.setAttribute("data-bs-theme",o)}function g(o){let e=()=>{o(f())},t=()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",e)};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e),t}function b(o,e){o.setAttribute("data-bs-theme",e)}var h=class{events={};on(e,t){typeof this.events[e]!="object"&&(this.events[e]=[]),this.events[e].push(t);let r=this,n=function(){r.removeListener(e,t)};return!/^(#has-listeners|#no-listeners)$/.test(e)&&this.events[e].length==1&&this.emit("#has-listeners",e),n}removeListener(e,t){var r;typeof this.events[e]=="object"&&(r=this.events[e].indexOf(t),r>-1&&(this.events[e].splice(r,1),!/^(#has-listeners|#no-listeners)$/.test(e)&&this.events[e].length==0&&this.emit("#no-listeners",e)))}emit(e){if(typeof this.events[e]=="object"){var t,r,n,s=[].slice.call(arguments,1);for(r=this.events[e].slice(),n=r.length,t=0;t<n;t++)try{r[t].apply(this,s)}catch(m){console.error(e,s),console.error(m)}}}once(e,t){return this.on(e,function r(){this.removeListener(e,r),t.apply(this,arguments)})}waitForEvent(e,t=0){return new Promise(r=>{let n,s=this.on(e,()=>{t>0&&clearTimeout(n),s(),r(!0)});t>0&&(n=setTimeout(()=>{s(),r(!1)},t))})}waitForAnyEvent(e,t=0){return new Promise(r=>{let n,s=[],m=()=>{t>0&&clearTimeout(n),s.forEach(d=>{d()}),r(!0)};e.forEach(d=>{s.push(this.on(d,m))}),t>0&&(n=setTimeout(()=>{m(),r(!1)},t))})}clear(){this.events={}}destroy(){this.clear()}clearEventListeners(e){(this.events[e]||[]).length>0&&(this.events[e]=[],this.emit("#no-listeners",e))}onHasEventListeners(e){return this.on("#has-listeners",e)}onNoEventListeners(e){return this.on("#no-listeners",e)}};var a=class{#t=new h;#e="auto";constructor(){let e=localStorage.getItem("preferredColorScheme");e==="dark"||e==="light"||e==="auto"?(this.#e=e,localStorage.setItem("preferredColorScheme",e)):(this.#e="auto",localStorage.setItem("preferredColorScheme","auto"))}get scheme(){return this.#e}set scheme(e){e!==this.#e&&(this.#e=e,localStorage.setItem("preferredColorScheme",this.#e),this.#t.emit("preferred-scheme-change",e))}onSchemeChange(e){return this.#t.on("preferred-scheme-change",e)}};var c=class{onSchemeChange(e){return g(e)}get scheme(){return f()}};var l=class{#t=new h;#e="light";#r;#o;darkThemeName="dark";lightThemeName="light";constructor(e,t){this.#r=t,this.#o=e;let r=t.scheme,n=e.scheme,s=sessionStorage.getItem("currentColorScheme")||"unknown";s=="dark"||s=="light"||(s="unknown"),s==="unknown"?this.#e=r==="auto"?n:r:this.#e=s}onSchemeChange(e){return this.#t.on("current-scheme-change",e)}get scheme(){return this.#e}set scheme(e){if(e!=="dark"&&e!=="light"&&e!=="auto")throw new Error("Color scheme must be either 'dark', 'light' or 'auto'.");e==="auto"&&(e=this.#r.scheme,e==="auto"&&(e=this.#o.scheme)),e!==this.#e&&(sessionStorage.setItem("currentColorScheme",e),this.#e=e,this.#t.emit("current-scheme-change",this.#e))}getDefaultTheme(){return this.#e==="dark"?this.darkThemeName:this.lightThemeName}};var S=new CSSStyleSheet;S.replaceSync(`
    :root {
        color-scheme: light dark;
    }`);document.adoptedStyleSheets.push(S);var C=new c,y=new a,i=new l(C,y),E="#FFFFFF",k="#212529",u=document.createElement("meta");u.name="theme-color";u.content=i.scheme==="dark"?k:E;document.head.appendChild(u);i.onSchemeChange(o=>{u.content=o==="dark"?k:E});C.onSchemeChange(o=>{y.scheme==="auto"&&(i.scheme=o)});i.onSchemeChange(o=>{p(i.getDefaultTheme())});p(i.getDefaultTheme());export{p as applyColorTheme,b as applyColorThemeToElement,i as currentSchemeStorage,y as preferredSchemeStorage,C as systemSchemeStorage};
