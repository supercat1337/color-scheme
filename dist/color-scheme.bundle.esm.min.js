function f(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function p(s){document.documentElement.setAttribute("data-bs-theme",s)}function g(s){let e=()=>{s(f())},t=()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",e)};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e),t}function w(s,e){s.setAttribute("data-bs-theme",e)}var i=class{events={};on(e,t){typeof this.events[e]!="object"&&(this.events[e]=[]),this.events[e].push(t);let r=this,o=function(){r.removeListener(e,t)};return!/^(#has-listeners|#no-listeners)$/.test(e)&&this.events[e].length==1&&this.emit("#has-listeners",e),o}removeListener(e,t){var r;typeof this.events[e]=="object"&&(r=this.events[e].indexOf(t),r>-1&&(this.events[e].splice(r,1),!/^(#has-listeners|#no-listeners)$/.test(e)&&this.events[e].length==0&&this.emit("#no-listeners",e)))}emit(e){if(typeof this.events[e]=="object"){var t,r,o,n=[].slice.call(arguments,1);for(r=this.events[e].slice(),o=r.length,t=0;t<o;t++)try{r[t].apply(this,n)}catch(a){console.error(e,n),console.error(a)}}}once(e,t){return this.on(e,function r(){this.removeListener(e,r),t.apply(this,arguments)})}waitForEvent(e,t=0){return new Promise(r=>{let o,n=this.on(e,()=>{t>0&&clearTimeout(o),n(),r(!0)});t>0&&(o=setTimeout(()=>{n(),r(!1)},t))})}waitForAnyEvent(e,t=0){return new Promise(r=>{let o,n=[],a=()=>{t>0&&clearTimeout(o),n.forEach(d=>{d()}),r(!0)};e.forEach(d=>{n.push(this.on(d,a))}),t>0&&(o=setTimeout(()=>{a(),r(!1)},t))})}clear(){this.events={}}destroy(){this.clear()}clearEventListeners(e){(this.events[e]||[]).length>0&&(this.events[e]=[],this.emit("#no-listeners",e))}onHasEventListeners(e){return this.on("#has-listeners",e)}onNoEventListeners(e){return this.on("#no-listeners",e)}};var m=class{#t=new i;#e="auto";constructor(){let e=localStorage.getItem("preferredColorScheme");e==="dark"||e==="light"||e==="auto"?(this.#e=e,localStorage.setItem("preferredColorScheme",e)):(this.#e="auto",localStorage.setItem("preferredColorScheme","auto")),window.addEventListener("storage",t=>{if(t.key==="preferredColorScheme"){let r=t.newValue?t.newValue:"auto",o=r==="dark"||r==="light"||r==="auto"?r:"auto";if(o===this.#e)return;this.#e=o,this.#t.emit("preferred-scheme-change",t.newValue)}})}get scheme(){return this.#e}set scheme(e){e!==this.#e&&(this.#e=e,localStorage.setItem("preferredColorScheme",this.#e),this.#t.emit("preferred-scheme-change",e))}onSchemeChange(e){return this.#t.on("preferred-scheme-change",e)}};var l=class{onSchemeChange(e){return g(e)}get scheme(){return f()}};var c=class{#t=new i;#e="light";#r;#o;darkThemeName="dark";lightThemeName="light";constructor(e,t){this.#r=t,this.#o=e;let r=t.scheme,o=e.scheme,n=sessionStorage.getItem("currentColorScheme")||"unknown";n=="dark"||n=="light"||(n="unknown"),n==="unknown"?this.#e=r==="auto"?o:r:this.#e=n}onSchemeChange(e){return this.#t.on("current-scheme-change",e)}get scheme(){return this.#e}set scheme(e){if(e!=="dark"&&e!=="light"&&e!=="auto")throw new Error("Color scheme must be either 'dark', 'light' or 'auto'.");e==="auto"&&(e=this.#r.scheme,e==="auto"&&(e=this.#o.scheme)),e!==this.#e&&(sessionStorage.setItem("currentColorScheme",e),this.#e=e,this.#t.emit("current-scheme-change",this.#e))}getDefaultTheme(){return this.#e==="dark"?this.darkThemeName:this.lightThemeName}};var S=new CSSStyleSheet;S.replaceSync(`
    :root {
        color-scheme: light dark;
    }`);document.adoptedStyleSheets.push(S);var C=new l,y=new m,h=new c(C,y),E="#FFFFFF",k="#212529",u=document.createElement("meta");u.name="theme-color";u.content=h.scheme==="dark"?k:E;document.head.appendChild(u);h.onSchemeChange(s=>{u.content=s==="dark"?k:E});C.onSchemeChange(s=>{y.scheme==="auto"&&(h.scheme=s)});h.onSchemeChange(s=>{p(h.getDefaultTheme())});p(h.getDefaultTheme());export{p as applyColorTheme,w as applyColorThemeToElement,h as currentSchemeStorage,y as preferredSchemeStorage,C as systemSchemeStorage};
